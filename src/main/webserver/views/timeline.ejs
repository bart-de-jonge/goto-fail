<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/stylesheets/timeline.css">
    <script src="/javascripts/jquery-offline.js"></script>
    <script src="/javascripts/timeline.js"></script>
</head>

<body>
    <div class="page-wrap">
        <header>
            <div class="content">
                <h1>Goto fail; web-based timeline</h1>
            </div>
        </header>

        <main>
            <div class="content">
                <p>Placeholder main</p>
                <table class="timeline">
                    <tbody>
                        <tr>
                            <th>Count number</th>
                            <th>Timeline blocks</th>
                        </tr>
                        <%
                            var curShotNumber = 0;
                            var prevShot = null;
                            var curShot = cameraTimeline.getCameraShots()[curShotNumber];
                            for(i = minCount*4; i <= maxCount*4; i++) { %>
                                <tr>
                                    <td><% if (i%4 === 0) {
                                            %><%=i/4%><%
                                        } else {
                                            %>-<%
                                        }%></td>
                                    <% if (curShotNumber != -1 && curShot.beginCount*4 === i) { %>
                                        <td rowspan="<%= (curShot.endCount - curShot.beginCount) * 4 + 1 %>">
                                            <div class="timeline-block">
                                                <span><%= curShot.beginCount %> - <%= curShot.endCount %></span>
                                            </div>
                                        </td>
                                        <% curShotNumber++;
                                        if (curShotNumber < cameraTimeline.getCameraShots().length) {
                                            prevShot = curShot;
                                            curShot = cameraTimeline.getCameraShots()[curShotNumber];
                                        } else {
                                            curShotNumber = -1;
                                        }
                                    } else if (prevShot === null || curShot.beginCount*4 > i && prevShot.endCount*4 < i) { %>
                                        <td></td>
                                    <% } %>
                                </tr>
                        <% }; %>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <footer>
        <div class="content">
            <p>Goto fail; All rights reserved</p>
        </div>
    </footer>
</body>

</html>